jQuery(document).ready(function(e){function t(e,t){(document.getElementById("month-"+E).classList.remove("active"),document.getElementById("month-"+e).classList.add("active"),E=e,t)&&document.querySelector(".months-wrap .active").scrollIntoView()}function n(e){var t=document.querySelector(".very-custom-calendar-wrap .calendar-current-date .month-placeholder"),n=document.querySelector(".very-custom-calendar-wrap .calendar-current-date .day-placeholder");t.innerText=e.format("dddd ."),n.innerText=e.format("D MMM")}function a(e,t,n,a){return e<a&&t<n}function i(t){return t||(t={}),Object.assign({header:{left:"",center:"",right:""},plugins:["dayGrid","timeGrid","interaction"],defaultView:"timeGridDay",nowIndicator:!0,allDaySlot:!1,contentHeight:800,selectable:!0,selectHelper:!0,eventOverlap:!1,datesRender:function(){Array.from(document.querySelectorAll(".fc-scroller")).forEach(function(e){new PerfectScrollbar(e)})},eventClick:function(t){"unavailable"!==t.event.className?e.getScript(t.event.extendedProps.edit_url,function(){c({startTime:moment(t.event.start).format("hh:mm A"),endTime:moment(t.event.end).format("hh:mm A"),setDate:moment(t.event.start).format("D MMM YYYY"),title:t.event.title,description:t.event.extendedProps.eventDescription}),e(".start_hidden").val(moment(t.event.start).format("D MMM YYYY")+" "+moment(t.event.start).format("hh:mm A")),e(".end_hidden").val(moment(t.event.start).format("D MMM YYYY")+" "+moment(t.event.end).format("hh:mm A")),e("#newEventAddDetailsBtn").on("click",function(){v()}),e("#bookingEditEventEditBookingBtn").on("click",function(){e("#chagneOrCancelDialog").modal(),m({startTime:e("#newEventStartTimepicker").val(),endTime:e("#newEventEndTimepicker").val(),setDate:e("#newEventDatePicker").val()})}),e("#chagneOrCancelDialogChangeReservation").on("click",function(){e("#bookingChangeRequestDialog").modal(),s({startTime:moment(t.event.start).format("hh:mm A"),endTime:moment(t.event.end).format("hh:mm A"),setDate:moment(t.event.start).format("D MMM YYYY")})}),e("#chagneOrCancelDialogCancelReservationBtn").on("click",function(){e("#cancelSessionDialog").modal()}),e(".cancel-session").click(function(){confirm("Are you sure you want to delete this booking?")&&e.ajax({type:"DELETE",url:t.event.extendedProps.delete_url,success:()=>!0})}),e(".edit-booking").click(function(){e.ajax({type:"PATCH",url:t.event.extendedProps.delete_url,data:{booking:{title:e("#booking_title").val(),start:e("#newEventDatePicker").val()+" "+e("#newEventStartTimepicker").val(),end:e("#newEventDatePicker").val()+" "+e("#newEventEndTimepicker").val(),description:e("#newEventAddDetailsTextArea").val()}},success:()=>!0})}),e("#bookingEditEventMoreOptionDialog").on("click",function(){e("#editEventMoreOptionDialog").modal(),d({startTime:e("#newEventStartTimepicker").val(),endTime:e("#newEventEndTimepicker").val(),setDate:e("#newEventDatePicker").val(),title:e("#booking_title").val(),description:e("#newEventAddDetailsTextArea").val()})}),e("#changeSendRequestBackBtn").on("click",function(){e("#chagneOrCancelDialog").modal()}),e("#cancelDialogBoxBackBtn").on("click",function(){e("#chagneOrCancelDialog").modal()}),e(".new-event-time-picker").mdtimepicker(),e(".new-event-date-picker").bootstrapMaterialDatePicker({weekStart:0,time:!1,format:"D MMM YYYY"}),e("#newEventDialog").addClass("edit-view").modal()}):e.getScript(t.event.extendedProps.unavailable_url,function(){})},select:function(t){if(g.getEvents().some(function(e){return!(!e.start||!e.end)&&a(e.start.getTime(),t.start.getTime(),e.end.getTime(),t.end.getTime())}))e("#newEventTimeConflict").modal();else{var n=moment.utc(moment(t.end).diff(moment(t.start))).valueOf();Math.floor(n/6e4);e("#profileCalendarUnavailableDialogBox").modal(),l({startTime:moment(t.start).format("hh:mm A"),endTime:moment(t.end).format("hh:mm A"),setDate:moment(t.start).format("D MMM YYYY")})}},events:"/bookings.json?self=1&other=0",eventRender:function(e){var t=e.event.extendedProps.eventDescription,n=e.event.extendedProps.eventName,a=e.event.extendedProps.hasStar;if(t){var i=document.createElement("div");i.innerText=t,i.classList.add("fc-event-description"),e.el.append(i)}if(n){var o=document.createElement("div");o.innerText=n,o.classList.add("fc-event-name"),e.el.append(o)}if(a){var r=document.createElement("i");r.innerText="star",r.classList.add("fc-event-star"),r.classList.add("material-icons"),e.el.append(r)}}},t)}function o(){e(".checkbox-switcher").each(function(t,n){var a=(n=e(n)).find(".checkbox"),i=n.find(".rect-1"),o=n.find(".rect-2");n.mouseup(function(){n.toggleClass("h_btn"),a.toggleClass("h_cb"),i.toggleClass("h_rects"),o.toggleClass("h_rects");var e=n.parent().parent().parent().find(".time-picker-wrap");e.toggleClass("d-none"),e.next().toggleClass("d-none"),e.children().length||r(e)})})}function r(t){var n='\n      <div>\n        <input type="text" value="" class="time-picker gray-input"/>\n\n        <span class="mx-2">to</span>\n\n        <input type="text" value="" class="time-picker gray-input"/>\n\n        <button type="button" class="d-inline-block btn btn-link btn-link-close" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>',a=document.createElement("div");a.innerHTML=n,e(t).append(a),e(t).find(".time-picker").mdtimepicker(),e(a).find(".btn-link-close").on("click",function(){e(this).parent().parent().remove()})}function l(t){var n=t.startTime,a=t.endTime,i=t.setDate;console.log(n),e(".today-placeholder").text(i),e(".start-time-placeholder").text(n),e(".end-time-placeholder").text(a),e(".start_hidden").val(moment(i).format("D MMM YYYY")+" "+n),e(".end_hidden").val(moment(i).format("D MMM YYYY")+" "+a)}function c(t){var n=t.startTime,a=t.endTime,i=t.setDate,o=t.title,r=t.description;e("#newEventStartTimepicker").val(n),e("#newEventEndTimepicker").val(a),e("#newEventDatePicker").val(i),o?e("#booking_title").val(o):e("#newEventSubject").val(""),r?(e("#newEventAddDetailsTextArea").val(r),v()):(e("#newEventAddDetailsTextArea").val(""),u())}function d(t){var n=t.startTime,a=t.endTime,i=t.setDate,o=t.title,r=t.description;e("#newEventStartTimepickerMoreOption").val(n),e("#newEventEndTimepickerMoreOption").val(a),e("#newEventDatePickerMoreOption").val(i),e("#newEventMoreOptionsCurrentDate").text(i),o&&e("#newEventSubjectMoreOption").val(o),r&&e("#newEventAddDetailsTextAreaMoreOption").val(r)}function m(t){var n=t.startTime,a=t.endTime,i=t.setDate;e(".start-time-placeholder").text(n),e(".end-time-placeholder").text(a),e(".today-placeholder").text(i)}function s(t){var n=t.startTime,a=t.endTime,i=t.setDate;e(".previous-start-time-placeholder").text(n),e(".previous-end-time-placeholder").text(a),e(".previous-day-placeholder").text(i)}function v(){e("#newEventAddDetails").removeClass("d-none"),e("#newEventAddDetailsBtn").addClass("d-none")}function u(){e("#newEventAddDetails").addClass("d-none"),e("#newEventAddDetailsBtn").removeClass("d-none")}function p(){var t='<div class="position-relative mt-3">\n                      <select class="custom-select mr-2 fz-14 gray-input d-inline-block notification-select">\n                        <option value="email" selected>Email</option>\n                        <option value="notification">Notification</option>\n                      </select>\n\n                      <input type="text" class="form-control mr-2 gray-input d-inline-block notification-duration-input" placeholder="30">\n\n                      <select class="custom-select fz-14 gray-input d-inline-block notification-duration-type-input">\n                        <option value="minutes" selected>minutes</option>\n                        <option value="hours">hours</option>\n                        <option value="days">days</option>\n                        <option value="weeks">weeks</option>\n                      </select>\n\n                      <button type="button" class="d-inline-block btn btn-link btn-link-close" aria-label="Close">\n                        <span aria-hidden="true">&times;</span>\n                      </button>\n                  </div>',n=document.createElement("div");n.innerHTML=t,e("#notif-wrap").append(n),e(n).find(".btn-link-close").on("click",function(){f(e(this))})}function f(t){e(t).parent().remove()}var k=document.querySelectorAll(".personal-timeline-calendar");if(k.length){var g=new FullCalendar.Calendar(k[0],i()),h=new FullCalendar.Calendar(k[1],i({contentHeight:400,eventClick:function(){},select:function(t){var n=g.view.type,i=moment.utc(moment(t.end).diff(moment(t.start))).valueOf();if(Math.floor(i/6e4)>("timeGridDay"===n?30:1440))g.unselect();else{if(g.getEvents().some(function(e){return a(e.start.getTime(),t.start.getTime(),e.end.getTime(),t.end.getTime())}))return void e("#newEventTimeConflict").modal();d({startTime:moment(t.start).format("hh:mm A"),endTime:moment(t.end).format("hh:mm A"),setDate:moment(t.start).format("D MMM YYYY")})}}}));if(g.render(),h.render(),window.personalTimelineCalendar=g,window.timelineCalendarMoreOptions=h,D=document.querySelector(".personal-very-custom-calendar")){var D;(D=new FullCalendar.Calendar(D,{plugins:["dayGrid","interaction","moment"],header:{left:"",center:"",right:""},aspectRatio:1,selectable:!0,select:function(e){moment.utc(moment(e.end).diff(moment(e.start))).format("D")>2?D.unselect():(g.gotoDate(e.start),n(moment(e.start)),t(moment(e.start).format("M")))}})).render(),new PerfectScrollbar(document.querySelector(".months-wrap")),new PerfectScrollbar(document.querySelector(".fc-scroller")),e(".time-picker").mdtimepicker(),e(".new-event-date-picker").bootstrapMaterialDatePicker({weekStart:0,time:!1,format:"D MMM YYYY"}),o();var w=moment(D.getDate()),E=w.format("M");t(E,!0),n(w),e(".months-wrap .month").on("click",function(){var n=e(this).attr("id").replace("month-",""),a="1",i=w.format("Y");D.gotoDate(moment(n+"-"+a+"-"+i,"MM-DD-YYYY").format()),t(n)}),e("#daily").on("click",function(){e(this).parent().find("a").removeClass("active"),e(this).addClass("active"),g.changeView("timeGridDay")}),e("#weekly").on("click",function(){e(this).parent().find("a").removeClass("active"),e(this).addClass("active"),g.changeView("dayGridWeek")}),e("#monthly").on("click",function(){e(this).parent().find("a").removeClass("active"),e(this).addClass("active"),g.changeView("dayGridMonth")}),e(".recurringAddTimePicker").on("click",function(){r(e(this).parent().parent().find(".time-picker-wrap"))}),e("#more-options-tab2-tab").on("click",function(){setTimeout(function(){h.updateSize()})}),e("#newEventAddDetailsBtn").on("click",function(){v()}),e("#newEventMoreOptionTodayBtn").on("click",function(){var t=moment();h.gotoDate(t.format()),e("#newEventMoreOptionsCurrentDate").text(t.format("D MMM YYYY"))}),e("#newEventMoreOptionNextDayBtn").on("click",function(){var t=moment(h.getDate()).add(1,"day");h.gotoDate(t.format()),e("#newEventMoreOptionsCurrentDate").text(t.format("D MMM YYYY"))}),e("#newEventMoreOptionPrevDayBtn").on("click",function(){var t=moment(h.getDate()).subtract(1,"day");h.gotoDate(t.format()),e("#newEventMoreOptionsCurrentDate").text(t.format("D MMM YYYY"))}),e("#addNotifButton").on("click",function(){p()}),e("#unavailableDialogBoxRecurrentLink").on("click",function(){e("#profileCalendarRecurringUnavailableDialogBox").modal()}),e("#profileCalendarRecurringUnavailableDialogBox").on("hidden.bs.modal",function(){e("body").removeClass("modal-open"),setTimeout(function(){e("body").removeClass("modal-open")},1e3)}),e("#profileCalendarRecurringUnavailableDialogBox").on("shown.bs.modal",function(){e("body").addClass("modal-open"),setTimeout(function(){e("body").addClass("modal-open")},1e3)}),e("#newEventMoreOptionBtn").on("click",function(){e("#editEventMoreOptionDialog").modal(),d({startTime:e("#newEventStartTimepicker").val(),endTime:e("#newEventEndTimepicker").val(),setDate:e("#newEventDatePicker").val(),title:e("#booking_title").val(),description:e("#newEventAddDetailsTextArea").val()})}),e("#editEventMoreOptionDialogEditBookingBtn").on("click",function(){e("#chagneOrCancelDialog").modal(),c({title:e("#newEventSubjectMoreOption").val(),startTime:e("#newEventStartTimepickerMoreOption").val(),endTime:e("#newEventEndTimepickerMoreOption").val(),setDate:e("#newEventDatePickerMoreOption").val(),description:e("#newEventAddDetailsTextAreaMoreOption").val()}),m({startTime:e("#newEventStartTimepickerMoreOption").val(),endTime:e("#newEventEndTimepickerMoreOption").val(),setDate:e("#newEventDatePickerMoreOption").val()})})}}});