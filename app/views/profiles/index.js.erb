<% js = escape_javascript(
  render(partial: 'list', locals: { categories: @categories })
) %>
$("#filterrific_results").html("<%= js %>");

<% jsg = escape_javascript(
  render(partial: 'listg', locals: { categories: @categories })
) %>
$("#filterrific_resultsG").html("<%= jsg %>");

console.log("index codee");
var guideCategories = window.localStorage.getItem('guideCategories');
 if(guideCategories){
  guideCategories = JSON.parse(guideCategories);
 }else{
  guideCategories = {categories:[]};
 }
 guideCategories.categories.forEach(cat=>{
  $("#guideCat-"+cat).removeClass('btn-success').addClass('btn-outline-dark').text('Added');
 });
 setGuideCategories();

 $('.addGuideBtnn').on('click', function () {
   // alert("Clicked  ");
   var id = this.id;
   id = id.split("-")[1];
   var isSelected = $(this).hasClass("btn-outline-dark");
   if(isSelected){
    unselecCategoryG(id);
   }else {
    selectCategoryG(id);
   }
   setGuideCategories();

 })

 function selectCategoryG(category){
  addCategoryG(category);
  $("#guideCat-"+category).removeClass('btn-success').addClass('btn-outline-dark').text('Added');
 }

 function unselecCategoryG(category){
  deleteCategoryG(category);
  $("#guideCat-"+category).removeClass('btn-outline-dark').addClass('btn-success').text('Add');
 }

 function addCategoryG(category){
  var array = window.localStorage.getItem('guideCategories');
  if(array){
   array = JSON.parse(array);
  }else{
   array = {categories:[]};
  }
  array.categories.push(category);
  window.localStorage.setItem('guideCategories', JSON.stringify(array));
 }
 function deleteCategoryG(category){
  var array = window.localStorage.getItem('guideCategories');
  if(array){
   array = JSON.parse(array);
  }else{
   array = {categories:[]};
  }

  array.categories = array.categories.filter(cat=>{
   return cat!=category;
  });
  window.localStorage.setItem('guideCategories', JSON.stringify(array));
 }

 function setGuideCategories(){
  /*this function keeps updating the value of the hidden tag
  to use it anytime in the backend*/
  var array = window.localStorage.getItem('guideCategories');
  if(array){
   array = JSON.parse(array);
  }else{
   array = {categories:[]};
  }
  console.log(array);
  var input = document.getElementById("guideCategories");
  if (input){
  	input.value = array;
  }

 }


 var exploreCategories = window.localStorage.getItem('exploreCategories');
 if(exploreCategories){
  exploreCategories = JSON.parse(exploreCategories);
 }else{
  exploreCategories = {categories:[]};
 }
 exploreCategories.categories.forEach(cat=>{
  $("#explorerCat-"+cat).removeClass('btn-success').addClass('btn-outline-dark').text('Added');
 });
 setExploreCategories();

 $('.addExploreBtnn').on('click', function () {
   // alert("Clicked  ");
   var id = this.id;
   id = id.split("-")[1];
   var isSelected = $(this).hasClass("btn-outline-dark");
   if(isSelected){
    unselecCategory(id);
   }else {
    selectCategory(id);
   }
   setExploreCategories();

 })

  $('.title').on('click', function () {
    // alert("Clicked  ");
    console.log("Hey, im still here!");

  })


 function selectCategory(category){
  addCategory(category);
  $("#explorerCat-"+category).removeClass('btn-success').addClass('btn-outline-dark').text('Added');
 }

 function unselecCategory(category){
  deleteCategory(category);
  $("#explorerCat-"+category).removeClass('btn-outline-dark').addClass('btn-success').text('Add');
 }

 function addCategory(category){
  var array = window.localStorage.getItem('exploreCategories');
  if(array){
   array = JSON.parse(array);
  }else{
   array = {categories:[]};
  }
  array.categories.push(category);
  window.localStorage.setItem('exploreCategories', JSON.stringify(array));
 }
 function deleteCategory(category){
  var array = window.localStorage.getItem('exploreCategories');
  if(array){
   array = JSON.parse(array);
  }else{
   array = {categories:[]};
  }

  array.categories = array.categories.filter(cat=>{
   return cat!=category;
  });
  window.localStorage.setItem('exploreCategories', JSON.stringify(array));
 }

 function setExploreCategories(){
  /*this function keeps updating the value of the hidden tag
  to use it anytime in the backend*/
  var array = window.localStorage.getItem('exploreCategories');
  if(array){
   array = JSON.parse(array);
  }else{
   array = {categories:[]};
  }
  console.log(array);
  var input = document.getElementById("exploreCategories");
  if (input){
  	input.value = array;
  }

 }
